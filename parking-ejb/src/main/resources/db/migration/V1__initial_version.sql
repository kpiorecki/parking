CREATE TABLE DATEENTITY (ID BIGINT NOT NULL, DATE BIGINT, DATETIME BIGINT, PRIMARY KEY (ID));
CREATE TABLE booking_entries (ID BIGINT NOT NULL, ACCEPTED SMALLINT DEFAULT 0 NOT NULL, CREATIONTIME BIGINT NOT NULL, login VARCHAR(255), booking_id BIGINT, PRIMARY KEY (ID));
CREATE TABLE records (ID BIGINT NOT NULL, POINTS INTEGER NOT NULL, VERSION INTEGER, VIP SMALLINT DEFAULT 0 NOT NULL, parking_uuid VARCHAR(255), login VARCHAR(255), PRIMARY KEY (ID));
CREATE TABLE bookings (ID BIGINT NOT NULL, DATE BIGINT NOT NULL, STATUS VARCHAR(255) NOT NULL, VERSION INTEGER, parking_uuid VARCHAR(255), PRIMARY KEY (ID));
CREATE UNIQUE INDEX INDEX_bookings_parking_uuid_date ON bookings (parking_uuid, date);
CREATE TABLE users (LOGIN VARCHAR(255) NOT NULL, EMAIL VARCHAR(255) NOT NULL, FIRSTNAME VARCHAR(255), LASTNAME VARCHAR(255), PASSWORD VARCHAR(255) NOT NULL, REMOVED SMALLINT DEFAULT 0 NOT NULL, VERSION INTEGER, PRIMARY KEY (LOGIN));
CREATE TABLE parkings (UUID VARCHAR(255) NOT NULL, CAPACITY INTEGER NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, CITY VARCHAR(255), NUMBER VARCHAR(255), POSTALCODE VARCHAR(255), STREET VARCHAR(255), PRIMARY KEY (UUID));
CREATE TABLE user_groups (login VARCHAR(255), group_name VARCHAR(255) NOT NULL);
ALTER TABLE booking_entries ADD CONSTRAINT booking_entries0 UNIQUE (login, booking_id);
ALTER TABLE records ADD CONSTRAINT UNQ_records_0 UNIQUE (login, parking_uuid);
ALTER TABLE booking_entries ADD CONSTRAINT bkngentriesbkingid FOREIGN KEY (booking_id) REFERENCES bookings (ID);
ALTER TABLE booking_entries ADD CONSTRAINT bokingentrieslogin FOREIGN KEY (login) REFERENCES users (LOGIN);
ALTER TABLE records ADD CONSTRAINT recordsparkinguuid FOREIGN KEY (parking_uuid) REFERENCES parkings (UUID);
ALTER TABLE records ADD CONSTRAINT FK_records_login FOREIGN KEY (login) REFERENCES users (LOGIN);
ALTER TABLE bookings ADD CONSTRAINT bokingsparkinguuid FOREIGN KEY (parking_uuid) REFERENCES parkings (UUID);
ALTER TABLE user_groups ADD CONSTRAINT user_groups_login FOREIGN KEY (login) REFERENCES users (LOGIN);
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(15), PRIMARY KEY (SEQ_NAME));
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('seq_bookings', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('seq_records', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('seq_booking_entries', 0);
